<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Page Template</title>
        <script type="text/javascript" src="d3.v5.js"></script>

        <style>
            .block
            {
                float:            left; 
                margin:           1px;
                padding:          4px;
                padding-top:      8px;
                text-align:       center;
                background-color: #cccccc;
                width:            140px; 
                font-family:      Helvetica, sans-serif;
                font-size:        12px;
                color:            #000000;
                border-radius:    8px;
            }
        </style>

    </head>

    <body>

        <div id='DeathRates'>
            <div id='block_1' class='block'>b </div>
        </div>

        <script type="text/javascript">

            // Add a wide left margin so that the table seems centered
            var CenterTable = function ()
            {
                var leftMargin = (window.innerWidth - 150) / 2;
                d3.select ('#DeathRates').style ('margin-left', leftMargin + 'px');
            }

            // on creation of this page, center the results.
            CenterTable ();

            // Also re-center the table when the page was resized...
            d3.select(window).on ('resize', function () { CenterTable (); } );


            var dataFile = 'ONCovidCases_DeathRates.csv';

            //
            // Function used to parse the CSV.  
            // 
            var rowConverter = function (d) 
            {
                return [  d['outcome'], 
                          parseFloat (d['rate']) 
                       ];
            };

            //
            // Read the CSV...
            //
            d3.csv (dataFile, rowConverter).then (function (data) 
            {
                var dataset = data;

                var output = '<strong> Average Fatality Age </strong>';
                output += '<hr>';
                output += (dataset[1][1]).toFixed(1);

                d3.select ('#block_1').node().innerHTML = output;

                console.log (data);
            } ); 

        </script>

    </body>

</html>


